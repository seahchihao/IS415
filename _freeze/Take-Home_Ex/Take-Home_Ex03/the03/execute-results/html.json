{
  "hash": "812655a019babae935bd3a1ba90acdd0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Prototyping Modules for Geospatial Analytics Shiny Application [JB: The New Frontier?]\"\nsubtitle: \"Take-home Exercise 03\"\nauthor: \"Seah Chi Hao\"\ndate: 2024-11-02\ndate-modified: \"last-modified\"\nexecute:\n  eval: true\n  echo: true\n  freeze: true\n  output: true\n  warning: false\n\n---\n\n\n\n## 1.0 Overview\n\n### 1.1 Context\n\nOf late, housing prices in Singapore have been flying through the roof. Because of this, many Singaporeans who yearn for a private space of their own without breaking the bank have been snapping up properties in neighbouring [Johor Bahru, Malaysia](https://en.wikipedia.org/wiki/Johor_Bahru). How high will this drive property prices in the city, perhaps best known among Singaporeans as a cheap and easily accessible weekend shopping getaway? Compared to Singapore, what factors influence the JB property market? Where is each type of housing, catered to different income levels, clustered? And does it matter that JB’s suburbs lack reliable access to public transport? This project aims to find the answers to these lingering questions and more, through a geospatial analysis on the property market of Johor Bahru and its emerging next-door neighbour, [Iskandar Puteri](https://en.wikipedia.org/wiki/Iskandar_Puteri).\n\n### 1.2 Objective(s)\n\n1. Vanilla and Emerging Hot/cold spot analysis on average/median property values for each Mukim in Johor Bahru and Iskandar Puteri (Pulai)\n2. KDE on selected amenity types (e.g. schools, shopping malls, major transport nodes, commercial districts, industrial districts) in Johor Bahru using data scraped from OpenStreetMap\n3. Building a hedonic pricing model for residential properties in Johor Bahru\n\nIn this exercise，we will be focusing on building a hedonic pricing model for residential properties in Johor Bahru.\n\n### 1.3 The Data (cleaned and processed)\n\n\n::: {.cell}\n\n:::\n\n\n\n#### 1.3.1 Property Transaction Data (Aspatial)\nWe got the Property Transaction Data from [Portal Pusat Maklumat Harta Tanah Negara (NAPIC)](https://napic2.jpph.gov.my/ms/data-transaksi)\n\nWe filter out the relevant data to get and further processed the data by dropping null values. Ensuring workable property data for us to work with.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproperty <- read_rds(\"data/rds/property_transaction_sf_notnull.rds\")\n```\n:::\n\n\n\n#### 1.3.2 Boundary Data (Geospatial)\nJohor Bahru, Malaysia boundary data can be downloaded and extracted from [geoBoundaries](https://www.geoboundaries.org/simplifiedDownloads.html).\n\nWe filtered out the Mukims (aka district/town - alike the 'Toa Payoh', 'Punggol', 'Ang Mo Kio' of Singapore) of Johor Bahru, Malaysia.\n\n- MUKIM BUKIT BATU\n- MUKIM SEDENAK\n- MUKIM KULAI\n- MUKIM TANJUNG KUPANG\n- MUKIM PULAI\n- MUKIM JELUTONG\n- MUKIM SENAI\n- BANDAR KULAI\n- MUKIM TEBRAU\n- BANDAR JOHOR BAHRU\n- MUKIM PLENTONG\n- MUKIM SUNGAI TIRAM\n\nWe also dropped did data cleaning by dropping columns that we would not be using.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\njb_kulai_bounded <- read_rds(\"data/rds/jb_kulai_bounded.rds\")\n```\n:::\n\n\n\n### 1.3.3 Point of Interest Data (Geospatial)\nPoint of Interest (POI) data can be downloaded from [OpenStreetMap](https://download.geofabrik.de/asia/malaysia-singapore-brunei.html).\n\nFrom the POI data, we extracted using [OSM Overpass Turbo API](https://overpass-turbo.eu/) to extract out POI that might affect housing prices:\n\n- CUSTOMS_FACILITIES (Only because Singaporeans might consider proximity of houses in JB to the custom when buying a house in JB)\n- COASTLINES\n- WATERFRONTS_AND_BEACHES\n- KINDERGARTENS\n- SCHOOLS\n- UNIVERSITIES_AND_COLLEGES\n- OFFICES,TOWNHALLS\n- POLICE_AND_FIRE_STATIONS\n- HOSPITALS_AND_SPECIALISTS\n- CEMETERY\n- COMMERCIAL\n- INDUSTRIAL\n- PARKS_AND_GREEN_SPACES\n- THEME_PARKS_AND_RESORTS\n- BUDDHIST_TEMPLES\n- CHURCHES\n- HINDU_TEMPLES\n- MOSQUES\n- MARKETPLACE,MALLS\n- RESTAURANT, CAFE, FAST_FOOD\n- SUPERMARKET,CONVENIENCE\n- AIRPORT\n- BUS_STOPS\n- BUS_TERMINALS\n- CARPARKS\n- PETROL_STATIONS\n\nAnd combining with the `property` and `jb_kulai_bounded` data, we get a `proximity_matrix`, that shows the proximity of the property to each POI.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproximity_matrix <- read_rds(\"data/rds/proximity_matrix.rds\")\n```\n:::\n\n\n\n## 2.0 Setup\nIn this assignment, four R packages will be used, they are:\n\n- [**sf**](https://r-spatial.github.io/sf/) is use for importing and handling geospatial data in R,\n- [**tidyverse**](https://www.tidyverse.org/) is mainly use for wrangling attribute data in R,\n- [**sfdep**](https://cran.r-project.org/package=sfdep) will be used to compute spatial weights, global and local spatial autocorrelation statistics, and\n- [**tmap**](https://cran.r-project.org/web/packages/tmap/index.html) will be used to prepare cartographic quality chropleth map.\n- [**ggstatsplot**]() will be used for statistical analysis\n- [**olsrr**]() will be used for statistical analysis\n\n\nThe following code chunk below is used to install and launch the four R packages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, tidyverse, sfdep, tmap, ggstatsplot, olsrr)\n```\n:::\n\n\n\n## 3.0 Regression\n\n### 3.1 Simple Linear Regression\nFirstly, let’s build a simple linear regression model with `price_USD` as our dependent variable and `Land/Parcel Area` as our independent variable. To simply test if prices are mainly dependent on the size of the property.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproperty_slr <- lm(formula=price_USD ~ `Land/Parcel Area`, data = proximity_matrix)\nsummary(property_slr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = price_USD ~ `Land/Parcel Area`, data = proximity_matrix)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2010856   -29305   -11129    20775   851666 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)    \n(Intercept)        59292.436    862.515   68.74   <2e-16 ***\n`Land/Parcel Area`   400.173      3.895  102.74   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 64150 on 14864 degrees of freedom\nMultiple R-squared:  0.4152,\tAdjusted R-squared:  0.4152 \nF-statistic: 1.055e+04 on 1 and 14864 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n> Note:\nWe can see that p-value is very small, hence, it can be concluded that size of the property is significant in determining the price at which the property is sold, which should come at no surprise.\n\n### 3.2 Multiple Linear Regression\nNow, we would like to test if price of properties in JB are affected by the POIs we identified earlier.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproperty_mlr <- lm(formula=price_USD ~ `Land/Parcel Area` +\n                     PROX_CUSTOMS_FACILITIES + PROX_COASTLINES +\n                     PROX_WATERFRONTS_AND_BEACHES + PROX_KINDERGARTENS +\n                     PROX_SCHOOLS + PROX_UNIVERSITIES_AND_COLLEGES +\n                     `PROX_OFFICES,TOWNHALLS` + PROX_POLICE_AND_FIRE_STATIONS +\n                     PROX_HOSPITALS_AND_SPECIALISTS + PROX_CEMETERY +\n                     PROX_COMMERCIAL + PROX_INDUSTRIAL +\n                     PROX_PARKS_AND_GREEN_SPACES + PROX_THEME_PARKS_AND_RESORTS +\n                     PROX_BUDDHIST_TEMPLES + PROX_CHURCHES +\n                     PROX_HINDU_TEMPLES + PROX_MOSQUES +\n                     `PROX_MARKETPLACE,MALLS` + `PROX_RESTAURANT, CAFE, FAST_FOOD` +\n                     `PROX_SUPERMARKET,CONVENIENCE` + PROX_AIRPORT +\n                     PROX_BUS_STOPS + PROX_BUS_TERMINALS +\n                     PROX_CARPARKS + PROX_PETROL_STATIONS, \n                   data = proximity_matrix)\n\nsummary(property_mlr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = price_USD ~ `Land/Parcel Area` + PROX_CUSTOMS_FACILITIES + \n    PROX_COASTLINES + PROX_WATERFRONTS_AND_BEACHES + PROX_KINDERGARTENS + \n    PROX_SCHOOLS + PROX_UNIVERSITIES_AND_COLLEGES + `PROX_OFFICES,TOWNHALLS` + \n    PROX_POLICE_AND_FIRE_STATIONS + PROX_HOSPITALS_AND_SPECIALISTS + \n    PROX_CEMETERY + PROX_COMMERCIAL + PROX_INDUSTRIAL + PROX_PARKS_AND_GREEN_SPACES + \n    PROX_THEME_PARKS_AND_RESORTS + PROX_BUDDHIST_TEMPLES + PROX_CHURCHES + \n    PROX_HINDU_TEMPLES + PROX_MOSQUES + `PROX_MARKETPLACE,MALLS` + \n    `PROX_RESTAURANT, CAFE, FAST_FOOD` + `PROX_SUPERMARKET,CONVENIENCE` + \n    PROX_AIRPORT + PROX_BUS_STOPS + PROX_BUS_TERMINALS + PROX_CARPARKS + \n    PROX_PETROL_STATIONS, data = proximity_matrix)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-1857688   -24926    -5536    16986   962142 \n\nCoefficients:\n                                     Estimate Std. Error t value Pr(>|t|)    \n(Intercept)                        38665.7338  4612.3135   8.383  < 2e-16 ***\n`Land/Parcel Area`                   379.6640     3.6426 104.228  < 2e-16 ***\nPROX_CUSTOMS_FACILITIES                0.9882     0.2947   3.354 0.000799 ***\nPROX_COASTLINES                       -1.4696     0.4069  -3.612 0.000305 ***\nPROX_WATERFRONTS_AND_BEACHES          -0.1829     0.3200  -0.572 0.567639    \nPROX_KINDERGARTENS                     1.1579     0.4804   2.410 0.015961 *  \nPROX_SCHOOLS                           0.5508     1.1075   0.497 0.618931    \nPROX_UNIVERSITIES_AND_COLLEGES        -5.5802     0.5205 -10.722  < 2e-16 ***\n`PROX_OFFICES,TOWNHALLS`               4.0372     0.4349   9.283  < 2e-16 ***\nPROX_POLICE_AND_FIRE_STATIONS          0.3276     0.5479   0.598 0.549938    \nPROX_HOSPITALS_AND_SPECIALISTS         3.4832     0.5707   6.103 1.07e-09 ***\nPROX_CEMETERY                          3.6972     0.5315   6.956 3.63e-12 ***\nPROX_COMMERCIAL                       -9.1703     0.7794 -11.766  < 2e-16 ***\nPROX_INDUSTRIAL                        5.1968     0.6592   7.883 3.42e-15 ***\nPROX_PARKS_AND_GREEN_SPACES           -3.4699     0.7714  -4.498 6.90e-06 ***\nPROX_THEME_PARKS_AND_RESORTS          -3.2876     0.4387  -7.494 7.06e-14 ***\nPROX_BUDDHIST_TEMPLES                  2.1807     0.3499   6.232 4.74e-10 ***\nPROX_CHURCHES                         -2.6531     0.3104  -8.548  < 2e-16 ***\nPROX_HINDU_TEMPLES                    -0.1114     0.4579  -0.243 0.807886    \nPROX_MOSQUES                          11.0327     0.9703  11.371  < 2e-16 ***\n`PROX_MARKETPLACE,MALLS`               3.8792     0.5230   7.417 1.27e-13 ***\n`PROX_RESTAURANT, CAFE, FAST_FOOD`     0.9580     1.2545   0.764 0.445077    \n`PROX_SUPERMARKET,CONVENIENCE`        -3.8310     1.3048  -2.936 0.003329 ** \nPROX_AIRPORT                           0.9446     0.2559   3.692 0.000224 ***\nPROX_BUS_STOPS                         6.4250     1.1452   5.610 2.06e-08 ***\nPROX_BUS_TERMINALS                     1.6876     0.4045   4.172 3.04e-05 ***\nPROX_CARPARKS                         -8.2270     1.0397  -7.913 2.69e-15 ***\nPROX_PETROL_STATIONS                   6.9497     1.0213   6.805 1.05e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 58720 on 14838 degrees of freedom\nMultiple R-squared:  0.5109,\tAdjusted R-squared:   0.51 \nF-statistic: 574.1 on 27 and 14838 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n> Note:\nTaking alpha at 5%, we can see that `PROX_WATERFRONTS_AND_BEACHES`, `PROX_SCHOOLS`, `PROX_UNIVERSITIES_AND_COLLEGES`, `PROX_POLICE_AND_FIRE_STATIONS`, `PROX_HINDU_TEMPLES` and `PROX_RESTAURANT, CAFE, FAST_FOOD` are not statiscally significant. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproperty_new_mlr <- lm(formula=price_USD ~ `Land/Parcel Area` +\n                     PROX_CUSTOMS_FACILITIES + PROX_COASTLINES +\n                     PROX_KINDERGARTENS + `PROX_OFFICES,TOWNHALLS` + \n                     PROX_HOSPITALS_AND_SPECIALISTS + PROX_CEMETERY +\n                     PROX_COMMERCIAL + PROX_INDUSTRIAL +\n                     PROX_PARKS_AND_GREEN_SPACES + PROX_THEME_PARKS_AND_RESORTS +\n                     PROX_BUDDHIST_TEMPLES + PROX_CHURCHES +\n                     PROX_MOSQUES + `PROX_MARKETPLACE,MALLS` + \n                     `PROX_SUPERMARKET,CONVENIENCE` + PROX_AIRPORT +\n                     PROX_BUS_STOPS + PROX_BUS_TERMINALS +\n                     PROX_CARPARKS + PROX_PETROL_STATIONS, \n                   data = proximity_matrix)\n\nols_regress(property_new_mlr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                              Model Summary                                \n--------------------------------------------------------------------------\nR                           0.712       RMSE                    58903.482 \nR-Squared                   0.507       MSE                3474762506.053 \nAdj. R-Squared              0.506       Coef. Var                  45.515 \nPred R-Squared              0.492       AIC                    368799.926 \nMAE                     33524.912       SBC                    368974.883 \n--------------------------------------------------------------------------\n RMSE: Root Mean Square Error \n MSE: Mean Square Error \n MAE: Mean Absolute Error \n AIC: Akaike Information Criteria \n SBC: Schwarz Bayesian Criteria \n\n                                     ANOVA                                      \n-------------------------------------------------------------------------------\n                    Sum of                                                     \n                   Squares           DF       Mean Square       F         Sig. \n-------------------------------------------------------------------------------\nRegression    5.301289e+13           21      2.524423e+12    726.502    0.0000 \nResidual      5.157937e+13        14844    3474762506.053                      \nTotal         1.045923e+14        14865                                        \n-------------------------------------------------------------------------------\n\n                                                 Parameter Estimates                                                  \n---------------------------------------------------------------------------------------------------------------------\n                         model         Beta    Std. Error    Std. Beta       t        Sig         lower        upper \n---------------------------------------------------------------------------------------------------------------------\n                   (Intercept)    29161.994      4375.489                   6.665    0.000    20585.494    37738.494 \n            `Land/Parcel Area`      382.102         3.649        0.615    104.705    0.000      374.949      389.255 \n       PROX_CUSTOMS_FACILITIES        0.758         0.266        0.058      2.855    0.004        0.238        1.279 \n               PROX_COASTLINES       -0.457         0.264       -0.031     -1.731    0.084       -0.975        0.061 \n            PROX_KINDERGARTENS       -0.412         0.422       -0.009     -0.976    0.329       -1.240        0.416 \n      `PROX_OFFICES,TOWNHALLS`        2.358         0.350        0.056      6.746    0.000        1.673        3.043 \nPROX_HOSPITALS_AND_SPECIALISTS        0.915         0.459        0.022      1.995    0.046        0.016        1.815 \n                 PROX_CEMETERY        3.377         0.463        0.053      7.295    0.000        2.470        4.285 \n               PROX_COMMERCIAL       -8.580         0.767       -0.116    -11.182    0.000      -10.084       -7.076 \n               PROX_INDUSTRIAL        4.996         0.644        0.054      7.759    0.000        3.734        6.258 \n   PROX_PARKS_AND_GREEN_SPACES       -4.121         0.754       -0.048     -5.469    0.000       -5.598       -2.644 \n  PROX_THEME_PARKS_AND_RESORTS       -3.802         0.336       -0.238    -11.324    0.000       -4.461       -3.144 \n         PROX_BUDDHIST_TEMPLES        1.738         0.332        0.043      5.241    0.000        1.088        2.388 \n                 PROX_CHURCHES       -1.695         0.287       -0.070     -5.909    0.000       -2.257       -1.133 \n                  PROX_MOSQUES       11.483         0.920        0.100     12.481    0.000        9.680       13.286 \n      `PROX_MARKETPLACE,MALLS`        2.430         0.480        0.049      5.061    0.000        1.489        3.370 \n`PROX_SUPERMARKET,CONVENIENCE`       -2.133         0.978       -0.020     -2.180    0.029       -4.051       -0.216 \n                  PROX_AIRPORT        1.434         0.250        0.122      5.728    0.000        0.943        1.925 \n                PROX_BUS_STOPS        8.499         1.102        0.066      7.710    0.000        6.338       10.660 \n            PROX_BUS_TERMINALS        1.454         0.398        0.030      3.655    0.000        0.674        2.233 \n                 PROX_CARPARKS       -8.105         1.027       -0.064     -7.895    0.000      -10.118       -6.093 \n          PROX_PETROL_STATIONS        6.086         0.943        0.062      6.454    0.000        4.237        7.934 \n---------------------------------------------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n\n## 4.0 Proposed Shiny Application User Interface Storyboard\nAfter determining the variables that we is affecting the price of JB property for Singaporean buyer. We can start thinking of how the user is able to see the expected prices of the properties, while toggling through different POIs. As everyone look out for different things when buying a property.\n\n![Figure 1: UI Storyboard](picture/UI storyboard.jpg){fig-align=\"center\"}\n\nThe user would be able to toggle between District (Mukim), Type of Property and POIs, with the added option of their budget and house area size.\n\n\n::: {.callout-note icon=false collapse=\"true\"}\n## District (Mukim)\n\n- MUKIM BUKIT BATU\n- MUKIM SEDENAK\n- MUKIM KULAI\n- MUKIM TANJUNG KUPANG\n- MUKIM PULAI\n- MUKIM JELUTONG\n- MUKIM SENAI\n- BANDAR KULAI\n- MUKIM TEBRAU\n- BANDAR JOHOR BAHRU\n- MUKIM PLENTONG\n- MUKIM SUNGAI TIRAM\n:::\n\n::: {.callout-note icon=false collapse=\"true\"}\n## Type of Property\n\n- 1 - 1 1/2 Storey Semi-Detached\n- 1 - 1 1/2 Storey Terranced\n- 2 - 2 1/2 Storey Semi-Detached\n- 2 - 2 1/2 Storey Terranced\n- Cluster House\n- Condominium/Apartment\n- Detached\n- Flat\n- Low-Cost Flat\n- Low-cost House\n- Town House\n:::\n\n::: {.callout-note icon=false collapse=\"true\"}\n## POIs options\n\n- CUSTOMS_FACILITIES\n- COASTLINES\n- KINDERGARTENS\n- OFFICES,TOWNHALLS\n- HOSPITALS_AND_SPECIALISTS\n- CEMETERY\n- COMMERCIAL\n- INDUSTRIAL\n- PARKS_AND_GREEN_SPACES\n- THEME_PARKS_AND_RESORTS\n- BUDDHIST_TEMPLES\n- CHURCHES\n- MOSQUES\n- MARKETPLACE,MALLS\n- SUPERMARKET,CONVENIENCE\n- AIRPORT\n- BUS_STOPS\n- BUS_TERMINALS\n- CARPARKS\n- PETROL_STATIONS\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}